import{_ as m,r as h,u as w,i as f,s as v,A as j,c as l,b as s,h as p,y as x,F as S,l as b,a as r,n as g,t as i,p as k,k as y}from"./index-BZYuOb9C.js";const c=n=>(k("data-v-3f68106d"),n=n(),y(),n),D={class:"section admin__section"},I={class:"container admin__container gap-50"},V=c(()=>s("h2",{class:"h2 admin__title js-s w-700"}," Мои заказы ",-1)),A={key:0,class:"js-s"},B={class:"admin__card grid grid-row gap-25 ai-c jc-sb width-100"},E={class:"grid admin-card__first grid-row gap-25 jc-s ai-e"},L={class:"admin-card__column grid grid-column gap-25 ac-s ji-s"},C={class:"h4 w-600 admin-card__title"},F={class:"admin-card__text w-200 grid grid-column gap-10"},M={class:"grid grid-row gap-10 jc-s ai-c"},N=c(()=>s("span",{class:"w-600 h6"},"Тип:",-1)),P={class:"admin-card__txt2 w-400"},T={class:"grid grid-row gap-10 jc-s ai-c"},U=c(()=>s("span",{class:"w-600 h6"},"Дата:",-1)),q={class:"admin-card__txt2 w-400"},z={class:"grid grid-row gap-10 jc-s ai-c"},O=c(()=>s("span",{class:"w-600 h6"},"Дата заверш.:",-1)),G={class:"admin-card__txt2 w-400"},H={class:"grid grid-row gap-10 jc-s ai-c"},J=c(()=>s("span",{class:"w-600 h6"},"Адрес:",-1)),K={class:"admin-card__txt2 w-400"},Q={class:"grid grid-row gap-10 jc-s ai-c"},R=c(()=>s("span",{class:"w-600 h5"},"Стоимость:",-1)),W={class:"admin-card__txt2 w-600 h6 color-dark"},X={class:"admin-card__column grid grid-column gap-25 ac-s ji-s"},Y={class:"admin-card__text w-200 grid grid-column gap-10"},Z={class:"grid grid-row gap-10 jc-s ai-c"},$=c(()=>s("span",{class:"w-600 h6"},"Кол-во:",-1)),ss={class:"admin-card__txt2 w-400"},as={class:"grid grid-row gap-10 jc-s ai-c"},ts=c(()=>s("span",{class:"w-600 h6"},"Файл:",-1)),is=["href"],cs={class:"grid grid-row gap-10 jc-s ai-c"},_s=c(()=>s("span",{class:"w-600 h5 txt-gradient"},"Статус:",-1)),ns={class:"admin-card__txt2 w-600 h6"},ds={class:"admin-card__column grid grid-column gap-25 ac-s ji-s js-e"},es=c(()=>s("div",{class:"left-half-clipper"},[s("div",{class:"first50-bar"}),s("div",{class:"value-bar"})],-1)),os={__name:"ProfileView",setup(n){let d=h([]),e=h([]),u=w();return f.get(window.origin+"/api/order/"+u.user_data.id).then(_=>{d.value=_.data.orders,d.value.forEach(t=>{let a=0;if(t.status==="Выполнено")a=100;else if(t.status==="Отклонено"||t.status==="На рассмотрении")a=0;else if(t.date_end){let o=100/((new Date(t.date_end)-new Date(t.date))/1e3/60/60);a=Math.ceil(Math.abs(o*((new Date(t.date_end)-new Date)/1e3/60/60)-100)),a>100&&(a=100),a<0&&(a=0)}e.value.push(a)})}),v(()=>{j.init();let _=0;document.querySelectorAll(".progress-circle").forEach(t=>{t.classList.add("p"+e.value[_]),e.value[_]>=50&&t.classList.add("over50"),_++})}),(_,t)=>(r(),l("section",D,[s("div",I,[V,p(d).length===0?(r(),l("span",A," Вы еще не делали заказов ")):x("",!0),(r(!0),l(S,null,b(p(d),(a,o)=>(r(),l("div",{class:g([{admin__inner_red:a.status==="Отклонено",admin__inner_yellow:a.status==="На рассмотрении",admin__inner_green:a.status==="Выполнено"},"admin__inner grid grid-column ji-s ac-s gap-50 width-100"]),"data-aos":"fade-up"},[s("div",B,[s("div",E,[s("div",L,[s("h3",C,"Заказ #00"+i(o+1),1),s("div",F,[s("span",M,[N,s("span",P,i(a.title),1)]),s("span",T,[U,s("span",q,i(a.date.split("T")[0]),1)]),s("span",z,[O,s("span",G,i(a.date_end?a.date_end.split("T")[0]:"__.__.____"),1)]),s("span",H,[J,s("span",K,i(a.address),1)]),s("span",Q,[R,s("span",W,i(a.cost)+"Р. ",1)])])]),s("div",X,[s("div",Y,[s("span",Z,[$,s("span",ss,i(a.count),1)]),s("span",as,[ts,s("a",{href:a.path,target:"_blank",class:"admin-card__txt2 w-400"},i(a.path.split("\\")[a.path.split("\\").length-1]),9,is)]),s("span",cs,[_s,s("span",ns,i(a.status),1)])])])]),s("div",ds,[s("div",{class:g([{"progress-red":a.status==="Отклонено","progress-yellow":a.status==="На рассмотрении","progress-green":a.status==="Выполнено"},"progress-circle admin-card__progress admin"])},[s("span",null,i(p(e)[o]+"%"),1),es],2)])])],2))),256))])]))}},rs=m(os,[["__scopeId","data-v-3f68106d"]]);export{rs as default};
